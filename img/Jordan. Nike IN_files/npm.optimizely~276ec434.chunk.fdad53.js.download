(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/notification_center/index.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/enums/index.js"),n=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/fns/index.js"),a=t("../../.yarn/cache/@optimizely-js-sdk-utils-npm-0.2.0-6e592e4113-c935bbfbc7.zip/node_modules/@optimizely/js-sdk-utils/lib/index.js").sprintf,o=r.LOG_LEVEL,s=r.LOG_MESSAGES;function NotificationCenter(e){this.logger=e.logger,this.errorHandler=e.errorHandler,this.__notificationListeners={},n.forOwn(r.NOTIFICATION_TYPES,function(e){this.__notificationListeners[e]=[]}.bind(this)),this.__listenerId=1}NotificationCenter.prototype.addNotificationListener=function(e,i){try{if(!(n.values(r.NOTIFICATION_TYPES).indexOf(e)>-1))return-1;this.__notificationListeners[e]||(this.__notificationListeners[e]=[]);var t=!1;if(n.forEach(this.__notificationListeners[e],(function(e){if(e.callback===i)return t=!0,!1})),t)return-1;this.__notificationListeners[e].push({id:this.__listenerId,callback:i});var a=this.__listenerId;return this.__listenerId+=1,a}catch(e){return this.logger.log(o.ERROR,e.message),this.errorHandler.handleError(e),-1}},NotificationCenter.prototype.removeNotificationListener=function(e){try{var i,t;if(n.forOwn(this.__notificationListeners,(function(r,a){if(n.forEach(r,(function(r,n){if(r.id===e)return i=n,t=a,!1})),void 0!==i&&void 0!==t)return!1})),void 0!==i&&void 0!==t)return this.__notificationListeners[t].splice(i,1),!0}catch(e){this.logger.log(o.ERROR,e.message),this.errorHandler.handleError(e)}return!1},NotificationCenter.prototype.clearAllNotificationListeners=function(){try{n.forOwn(r.NOTIFICATION_TYPES,function(e){this.__notificationListeners[e]=[]}.bind(this))}catch(e){this.logger.log(o.ERROR,e.message),this.errorHandler.handleError(e)}},NotificationCenter.prototype.clearNotificationListeners=function(e){try{this.__notificationListeners[e]=[]}catch(e){this.logger.log(o.ERROR,e.message),this.errorHandler.handleError(e)}},NotificationCenter.prototype.sendNotifications=function(e,i){try{n.forEach(this.__notificationListeners[e],function(t){var r=t.callback;try{r(i)}catch(i){this.logger.log(o.ERROR,a(s.NOTIFICATION_LISTENER_EXCEPTION,"NOTIFICATION_CENTER",e,i.message))}}.bind(this))}catch(e){this.logger.log(o.ERROR,e.message),this.errorHandler.handleError(e)}},e.exports={createNotificationCenter:function(e){return new NotificationCenter(e)}}},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/optimizely_config/index.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/project_config/index.js");function getMergedVariablesMap(e,i,t,r){var n=e.experimentFeatureMap[t],a={};if(n){var o=r[n],s=(i.variables||[]).reduce((function(e,i){return e[i.id]={id:i.id,value:i.value},e}),{});a=(o||[]).reduce((function(e,t){var r=s[t.id],n=i.featureEnabled&&r?r.value:t.defaultValue;return e[t.key]={id:t.id,key:t.key,type:t.type,value:n},e}),{})}return a}function getFeaturesMap(e,i){return(e.featureFlags||[]).reduce((function(t,r){return t[r.key]={id:r.id,key:r.key,experimentsMap:(r.experimentIds||[]).reduce((function(t,r){var n=e.experimentIdMap[r].key;return t[n]=i[n],t}),{}),variablesMap:(r.variables||[]).reduce((function(e,i){return e[i.key]={id:i.id,key:i.key,type:i.type,value:i.defaultValue},e}),{})},t}),{})}e.exports={getOptimizelyConfig:function(e){var i=function getExperimentsMap(e){var i=function getRolloutExperimentIds(e){return(e||[]).reduce((function(e,i){return i.experiments.forEach((function(i){e[i.id]=!0})),e}),{})}(e.rollouts),t=(e.featureFlags||[]).reduce((function(e,i){return e[i.id]=i.variables,e}),{});return(e.experiments||[]).reduce((function(n,a){return i[a.id]||(n[a.key]={id:a.id,key:a.key,variationsMap:(a.variations||[]).reduce((function(i,n){return i[n.key]={id:n.id,key:n.key,variablesMap:getMergedVariablesMap(e,n,a.id,t)},r.isFeatureExperiment(e,a.id)&&(i[n.key].featureEnabled=n.featureEnabled),i}),{})}),n}),{})}(e);return{experimentsMap:i,featuresMap:getFeaturesMap(e,i),revision:e.revision}}}},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/project_config/index.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/fns/index.js"),n=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/enums/index.js"),a=t("../../.yarn/cache/@optimizely-js-sdk-utils-npm-0.2.0-6e592e4113-c935bbfbc7.zip/node_modules/@optimizely/js-sdk-utils/lib/index.js").sprintf,o=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/config_validator/index.js"),s=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/project_config/project_config_schema.js"),p="PROJECT_CONFIG",d=n.ERROR_MESSAGES,l=n.LOG_MESSAGES,u=n.LOG_LEVEL,c=n.FEATURE_VARIABLE_TYPES;e.exports={createProjectConfig:function(e){var i,t=r.cloneDeep(e);return r.forEach(t.audiences,(function(e){e.conditions=JSON.parse(e.conditions)})),t.audiencesById=r.keyBy(t.audiences,"id"),r.assign(t.audiencesById,r.keyBy(t.typedAudiences,"id")),t.attributeKeyMap=r.keyBy(t.attributes,"key"),t.eventKeyMap=r.keyBy(t.events,"key"),t.groupIdMap=r.keyBy(t.groups,"id"),r.forEach(t.groupIdMap,(function(e,n){i=r.cloneDeep(e.experiments),r.forEach(i,(function(e){t.experiments.push(r.assignIn(e,{groupId:n}))}))})),t.rolloutIdMap=r.keyBy(t.rollouts||[],"id"),r.forOwn(t.rolloutIdMap,(function(e){r.forEach(e.experiments||[],(function(e){t.experiments.push(r.cloneDeep(e)),e.variationKeyMap=r.keyBy(e.variations,"key")}))})),t.experimentKeyMap=r.keyBy(t.experiments,"key"),t.experimentIdMap=r.keyBy(t.experiments,"id"),t.variationIdMap={},t.variationVariableUsageMap={},r.forEach(t.experiments,(function(e){e.variationKeyMap=r.keyBy(e.variations,"key"),r.assignIn(t.variationIdMap,r.keyBy(e.variations,"id")),r.forOwn(e.variationKeyMap,(function(e){e.variables&&(t.variationVariableUsageMap[e.id]=r.keyBy(e.variables,"id"))}))})),t.experimentFeatureMap={},t.featureKeyMap=r.keyBy(t.featureFlags||[],"key"),r.forOwn(t.featureKeyMap,(function(e){e.variableKeyMap=r.keyBy(e.variables,"key"),r.forEach(e.experimentIds||[],(function(i){t.experimentFeatureMap[i]?t.experimentFeatureMap[i].push(e.id):t.experimentFeatureMap[i]=[e.id];var r=t.experimentIdMap[i];r.groupId&&!e.groupId&&(e.groupId=r.groupId)}))})),t},getExperimentId:function(e,i){var t=e.experimentKeyMap[i];if(r.isEmpty(t))throw new Error(a(d.INVALID_EXPERIMENT_KEY,p,i));return t.id},getLayerId:function(e,i){var t=e.experimentIdMap[i];if(r.isEmpty(t))throw new Error(a(d.INVALID_EXPERIMENT_ID,p,i));return t.layerId},getAttributeId:function(e,i,t){var r=e.attributeKeyMap[i],n=0===i.indexOf("$opt_");return r?(n&&t.log(u.WARN,a("Attribute %s unexpectedly has reserved prefix %s; using attribute ID instead of reserved attribute name.",i,"$opt_")),r.id):n?i:(t.log(u.DEBUG,a(d.UNRECOGNIZED_ATTRIBUTE,p,i)),null)},getEventId:function(e,i){var t=e.eventKeyMap[i];return t?t.id:null},getExperimentStatus:function(e,i){var t=e.experimentKeyMap[i];if(r.isEmpty(t))throw new Error(a(d.INVALID_EXPERIMENT_KEY,p,i));return t.status},isActive:function(i,t){return"Running"===e.exports.getExperimentStatus(i,t)},isRunning:function(i,t){return"Running"===e.exports.getExperimentStatus(i,t)},getExperimentAudienceConditions:function(e,i){var t=e.experimentKeyMap[i];if(r.isEmpty(t))throw new Error(a(d.INVALID_EXPERIMENT_KEY,p,i));return t.audienceConditions||t.audienceIds},getVariationKeyFromId:function(e,i){return e.variationIdMap.hasOwnProperty(i)?e.variationIdMap[i].key:null},getVariationIdFromExperimentAndVariationKey:function(e,i,t){var r=e.experimentKeyMap[i];return r.variationKeyMap.hasOwnProperty(t)?r.variationKeyMap[t].id:null},getExperimentFromKey:function(e,i){if(e.experimentKeyMap.hasOwnProperty(i)){var t=e.experimentKeyMap[i];if(t)return t}throw new Error(a(d.EXPERIMENT_KEY_NOT_IN_DATAFILE,p,i))},getTrafficAllocation:function(e,i){var t=e.experimentKeyMap[i];if(r.isEmpty(t))throw new Error(a(d.INVALID_EXPERIMENT_KEY,p,i));return t.trafficAllocation},getExperimentFromId:function(e,i,t){if(e.experimentIdMap.hasOwnProperty(i)){var r=e.experimentIdMap[i];if(r)return r}return t.log(u.ERROR,a(d.INVALID_EXPERIMENT_ID,p,i)),null},getFeatureFromKey:function(e,i,t){if(e.featureKeyMap.hasOwnProperty(i)){var r=e.featureKeyMap[i];if(r)return r}return t.log(u.ERROR,a(d.FEATURE_NOT_IN_DATAFILE,p,i)),null},getVariableForFeature:function(e,i,t,r){var n=e.featureKeyMap[i];if(!n)return r.log(u.ERROR,a(d.FEATURE_NOT_IN_DATAFILE,p,i)),null;var o=n.variableKeyMap[t];return o||(r.log(u.ERROR,a(d.VARIABLE_KEY_NOT_IN_DATAFILE,p,t,i)),null)},getVariableValueForVariation:function(e,i,t,r){if(!i||!t)return null;if(!e.variationVariableUsageMap.hasOwnProperty(t.id))return r.log(u.ERROR,a(d.VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT,p,t.id)),null;var n=e.variationVariableUsageMap[t.id][i.id];return n?n.value:null},getTypeCastValue:function(e,i,t){var r;switch(i){case c.BOOLEAN:"true"!==e&&"false"!==e?(t.log(u.ERROR,a(d.UNABLE_TO_CAST_VALUE,p,e,i)),r=null):r="true"===e;break;case c.INTEGER:r=parseInt(e,10),isNaN(r)&&(t.log(u.ERROR,a(d.UNABLE_TO_CAST_VALUE,p,e,i)),r=null);break;case c.DOUBLE:r=parseFloat(e),isNaN(r)&&(t.log(u.ERROR,a(d.UNABLE_TO_CAST_VALUE,p,e,i)),r=null);break;default:r=e}return r},getAudiencesById:function(e){return e.audiencesById},eventWithKeyExists:function(e,i){return e.eventKeyMap.hasOwnProperty(i)},isFeatureExperiment:function(e,i){return e.experimentFeatureMap.hasOwnProperty(i)},tryCreatingProjectConfig:function(i){return o.validateDatafile(i.datafile),!0===i.skipJSONValidation?i.logger.log(u.INFO,a(l.SKIPPING_JSON_VALIDATION,p)):i.jsonSchemaValidator&&(i.jsonSchemaValidator.validate(s,i.datafile),i.logger.log(u.INFO,a(l.VALID_DATAFILE,p))),e.exports.createProjectConfig(i.datafile)}}},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/project_config/project_config_manager.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/fns/index.js"),n=t("../../.yarn/cache/@optimizely-js-sdk-utils-npm-0.2.0-6e592e4113-c935bbfbc7.zip/node_modules/@optimizely/js-sdk-utils/lib/index.js").sprintf,a=t("../../.yarn/cache/@optimizely-js-sdk-logging-npm-0.1.0-43f6c5e030-b1d2de26cf.zip/node_modules/@optimizely/js-sdk-logging/lib/index.js"),o=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/config_validator/index.js"),s=t("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/index.browser.js"),p=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/enums/index.js"),d=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/project_config/index.js"),l=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/optimizely_config/index.js"),u=a.getLogger(),c=p.ERROR_MESSAGES;function getErrorMessage(e,i){return e instanceof Error?e.message:i||"Unknown error"}function ProjectConfigManager(e){try{this.__initialize(e)}catch(e){u.error(e),this.__updateListeners=[],this.__configObj=null,this.__optimizelyConfigObj=null,this.__readyPromise=Promise.resolve({success:!1,reason:getErrorMessage(e,"Error in initialize")})}}ProjectConfigManager.prototype.__initialize=function(e){if(this.__updateListeners=[],this.jsonSchemaValidator=e.jsonSchemaValidator,this.skipJSONValidation=e.skipJSONValidation,!e.datafile&&!e.sdkKey){this.__configObj=null;var i=new Error(n(c.DATAFILE_AND_SDK_KEY_MISSING,"PROJECT_CONFIG_MANAGER"));return this.__readyPromise=Promise.resolve({success:!1,reason:getErrorMessage(i)}),void u.error(i)}var t,a=this.__getDatafileFromConfig(e);if(a)try{this.__configObj=d.tryCreatingProjectConfig({datafile:a,jsonSchemaValidator:this.jsonSchemaValidator,logger:u,skipJSONValidation:this.skipJSONValidation}),this.__optimizelyConfigObj=l.getOptimizelyConfig(this.__configObj)}catch(e){u.error(e),t=e,this.__configObj=null}else this.__configObj=null;if(e.sdkKey){var o={sdkKey:e.sdkKey};this.__validateDatafileOptions(e.datafileOptions)&&r.assign(o,e.datafileOptions),a&&this.__configObj&&(o.datafile=a),this.datafileManager=new s.HttpPollingDatafileManager(o),this.datafileManager.start(),this.__readyPromise=this.datafileManager.onReady().then(this.__onDatafileManagerReadyFulfill.bind(this),this.__onDatafileManagerReadyReject.bind(this)),this.datafileManager.on("update",this.__onDatafileManagerUpdate.bind(this))}else this.__configObj?this.__readyPromise=Promise.resolve({success:!0}):this.__readyPromise=Promise.resolve({success:!1,reason:getErrorMessage(t,"Invalid datafile")})},ProjectConfigManager.prototype.__onDatafileManagerReadyFulfill=function(){var e,i=this.datafileManager.get();try{e=d.tryCreatingProjectConfig({datafile:i,jsonSchemaValidator:this.jsonSchemaValidator,logger:u,skipJSONValidation:this.skipJSONValidation})}catch(e){return u.error(e),{success:!1,reason:getErrorMessage(e)}}return this.__handleNewConfigObj(e),{success:!0}},ProjectConfigManager.prototype.__onDatafileManagerReadyReject=function(e){return{success:!1,reason:getErrorMessage(e,"Failed to become ready")}},ProjectConfigManager.prototype.__onDatafileManagerUpdate=function(){var e,i=this.datafileManager.get();try{e=d.tryCreatingProjectConfig({datafile:i,jsonSchemaValidator:this.jsonSchemaValidator,logger:u,skipJSONValidation:this.skipJSONValidation})}catch(e){u.error(e)}e&&this.__handleNewConfigObj(e)},ProjectConfigManager.prototype.__getDatafileFromConfig=function(e){var i=null;try{e.datafile&&(o.validateDatafile(e.datafile),i="string"==typeof e.datafile||e.datafile instanceof String?JSON.parse(e.datafile):e.datafile)}catch(e){u.error(e)}return i},ProjectConfigManager.prototype.__validateDatafileOptions=function(e){return void 0===e||"object"==typeof e&&null!==e},ProjectConfigManager.prototype.__handleNewConfigObj=function(e){var i=this.__configObj;(i?i.revision:"null")!==e.revision&&(this.__configObj=e,this.__optimizelyConfigObj=l.getOptimizelyConfig(e),this.__updateListeners.forEach((function(i){i(e)})))},ProjectConfigManager.prototype.getConfig=function(){return this.__configObj},ProjectConfigManager.prototype.getOptimizelyConfig=function(){return this.__optimizelyConfigObj},ProjectConfigManager.prototype.onReady=function(){return this.__readyPromise},ProjectConfigManager.prototype.onUpdate=function(e){return this.__updateListeners.push(e),function(){var i=this.__updateListeners.indexOf(e);i>-1&&this.__updateListeners.splice(i,1)}.bind(this)},ProjectConfigManager.prototype.stop=function(){this.datafileManager&&this.datafileManager.stop(),this.__updateListeners=[]},e.exports={ProjectConfigManager:ProjectConfigManager}},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/project_config/project_config_schema.js":function(e,i){e.exports={$schema:"http://json-schema.org/draft-04/schema#",type:"object",properties:{projectId:{type:"string",required:!0},accountId:{type:"string",required:!0},groups:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},policy:{type:"string",required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},experiments:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0},status:{type:"string",required:!0},layerId:{type:"string",required:!0},variations:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},audienceIds:{type:"array",items:{type:"string"},required:!0},forcedVariations:{type:"object",required:!0}}},required:!0}}},required:!0},experiments:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0},status:{type:"string",required:!0},layerId:{type:"string",required:!0},variations:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},trafficAllocation:{type:"array",items:{type:"object",properties:{entityId:{type:"string",required:!0},endOfRange:{type:"integer",required:!0}}},required:!0},audienceIds:{type:"array",items:{type:"string"},required:!0},forcedVariations:{type:"object",required:!0}}},required:!0},events:{type:"array",items:{type:"object",properties:{key:{type:"string",required:!0},experimentIds:{type:"array",items:{type:"string",required:!0}},id:{type:"string",required:!0}}},required:!0},audiences:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},name:{type:"string",required:!0},conditions:{type:"string",required:!0}}},required:!0},attributes:{type:"array",items:{type:"object",properties:{id:{type:"string",required:!0},key:{type:"string",required:!0}}},required:!0},version:{type:"string",required:!0},revision:{type:"string",required:!0}}}}}]);
//# sourceMappingURL=npm.optimizely~276ec434.chunk.fdad53.js.map