(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/backoffController.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/config.js");var s=function(){function BackoffController(){this.errorCount=0}return BackoffController.prototype.getDelay=function(){return 0===this.errorCount?0:1e3*r.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT[Math.min(r.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1,this.errorCount)]+function randomMilliseconds(){return Math.round(1e3*Math.random())}()},BackoffController.prototype.countError=function(){this.errorCount<r.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1&&this.errorCount++},BackoffController.prototype.reset=function(){this.errorCount=0},BackoffController}();t.default=s},"../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/browserDatafileManager.js":function(e,t,i){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=i("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/browserRequest.js"),a=function(e){function BrowserDatafileManager(){return null!==e&&e.apply(this,arguments)||this}return s(BrowserDatafileManager,e),BrowserDatafileManager.prototype.makeGetRequest=function(e,t){return o.makeGetRequest(e,t)},BrowserDatafileManager.prototype.getConfigDefaults=function(){return{autoUpdate:!1}},BrowserDatafileManager}(n(i("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/httpPollingDatafileManager.js")).default);t.default=a},"../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/browserRequest.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/config.js"),s=i("../../.yarn/cache/@optimizely-js-sdk-logging-npm-0.1.0-43f6c5e030-b1d2de26cf.zip/node_modules/@optimizely/js-sdk-logging/lib/index.js").getLogger("DatafileManager");t.makeGetRequest=function makeGetRequest(e,t){var i=new XMLHttpRequest;return{responsePromise:new Promise((function(n,o){i.open("GET",e,!0),function setHeadersInXhr(e,t){Object.keys(e).forEach((function(i){var r=e[i];t.setRequestHeader(i,r)}))}(t,i),i.onreadystatechange=function(){if(4===i.readyState){if(0===i.status)return void o(new Error("Request error"));var e=function parseHeadersFromXhr(e){var t=e.getAllResponseHeaders();if(null===t)return{};var i=t.split("\r\n"),r={};return i.forEach((function(e){var t=e.indexOf(": ");if(t>-1){var i=e.slice(0,t),s=e.slice(t+2);s.length>0&&(r[i]=s)}})),r}(i),t={statusCode:i.status,body:i.responseText,headers:e};n(t)}},i.timeout=r.REQUEST_TIMEOUT_MS,i.ontimeout=function(){s.error("Request timed out")},i.send()})),abort:function(){i.abort()}}}},"../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/config.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_UPDATE_INTERVAL=3e5,t.MIN_UPDATE_INTERVAL=1e3,t.DEFAULT_URL_TEMPLATE="https://cdn.optimizely.com/datafiles/%s.json",t.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT=[0,8,16,32,64,128,256,512],t.REQUEST_TIMEOUT_MS=6e4},"../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/eventEmitter.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function EventEmitter(){this.listeners={},this.listenerId=1}return EventEmitter.prototype.on=function(e,t){var i=this;this.listeners[e]||(this.listeners[e]={});var r=String(this.listenerId);return this.listenerId++,this.listeners[e][r]=t,function(){i.listeners[e]&&delete i.listeners[e][r]}},EventEmitter.prototype.emit=function(e,t){var i=this.listeners[e];i&&Object.keys(i).forEach((function(e){(0,i[e])(t)}))},EventEmitter.prototype.removeAllListeners=function(){this.listeners={}},EventEmitter}();t.default=r},"../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/httpPollingDatafileManager.js":function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=i("../../.yarn/cache/@optimizely-js-sdk-logging-npm-0.1.0-43f6c5e030-b1d2de26cf.zip/node_modules/@optimizely/js-sdk-logging/lib/index.js"),o=i("../../.yarn/cache/@optimizely-js-sdk-utils-npm-0.1.0-afdef27f46-f4ecb89ef0.zip/node_modules/@optimizely/js-sdk-utils/lib/index.js"),a=s(i("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/eventEmitter.js")),l=i("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/config.js"),u=s(i("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/backoffController.js")),d=n.getLogger("DatafileManager");function isSuccessStatusCode(e){return e>=200&&e<400}var c=function(){function HttpPollingDatafileManager(e){var t=this,i=r({},this.getConfigDefaults(),e),s=i.datafile,n=i.autoUpdate,c=void 0!==n&&n,f=i.sdkKey,p=i.updateInterval,m=void 0===p?l.DEFAULT_UPDATE_INTERVAL:p,h=i.urlTemplate,y=void 0===h?l.DEFAULT_URL_TEMPLATE:h;this.isReadyPromiseSettled=!1,this.readyPromiseResolver=function(){},this.readyPromiseRejecter=function(){},this.readyPromise=new Promise((function(e,i){t.readyPromiseResolver=e,t.readyPromiseRejecter=i})),s?(this.currentDatafile=s,this.resolveReadyPromise()):this.currentDatafile=null,this.isStarted=!1,this.datafileUrl=o.sprintf(y,f),this.emitter=new a.default,this.autoUpdate=c,!function isValidUpdateInterval(e){return e>=l.MIN_UPDATE_INTERVAL}(m)?(d.warn("Invalid updateInterval %s, defaulting to %s",m,l.DEFAULT_UPDATE_INTERVAL),this.updateInterval=l.DEFAULT_UPDATE_INTERVAL):this.updateInterval=m,this.currentTimeout=null,this.currentRequest=null,this.backoffController=new u.default,this.syncOnCurrentRequestComplete=!1}return HttpPollingDatafileManager.prototype.get=function(){return this.currentDatafile},HttpPollingDatafileManager.prototype.start=function(){this.isStarted||(d.debug("Datafile manager started"),this.isStarted=!0,this.backoffController.reset(),this.syncDatafile())},HttpPollingDatafileManager.prototype.stop=function(){return d.debug("Datafile manager stopped"),this.isStarted=!1,this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.emitter.removeAllListeners(),this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),Promise.resolve()},HttpPollingDatafileManager.prototype.onReady=function(){return this.readyPromise},HttpPollingDatafileManager.prototype.on=function(e,t){return this.emitter.on(e,t)},HttpPollingDatafileManager.prototype.onRequestRejected=function(e){this.isStarted&&(this.backoffController.countError(),e instanceof Error?d.error("Error fetching datafile: %s",e.message,e):"string"==typeof e?d.error("Error fetching datafile: %s",e):d.error("Error fetching datafile"))},HttpPollingDatafileManager.prototype.onRequestResolved=function(e){if(this.isStarted){void 0!==e.statusCode&&isSuccessStatusCode(e.statusCode)?this.backoffController.reset():this.backoffController.countError(),this.trySavingLastModified(e.headers);var t=this.getNextDatafileFromResponse(e);if(null!==t)if(d.info("Updating datafile from response"),this.currentDatafile=t,this.isReadyPromiseSettled){var i={datafile:t};this.emitter.emit("update",i)}else this.resolveReadyPromise()}},HttpPollingDatafileManager.prototype.onRequestComplete=function(){this.isStarted&&(this.currentRequest=null,this.isReadyPromiseSettled||this.autoUpdate||this.rejectReadyPromise(new Error("Failed to become ready")),this.autoUpdate&&this.syncOnCurrentRequestComplete&&this.syncDatafile(),this.syncOnCurrentRequestComplete=!1)},HttpPollingDatafileManager.prototype.syncDatafile=function(){var e=this,t={};this.lastResponseLastModified&&(t["if-modified-since"]=this.lastResponseLastModified),d.debug("Making datafile request to url %s with headers: %s",this.datafileUrl,(function(){return JSON.stringify(t)})),this.currentRequest=this.makeGetRequest(this.datafileUrl,t);var onRequestComplete=function(){e.onRequestComplete()};this.currentRequest.responsePromise.then((function(t){e.onRequestResolved(t)}),(function(t){e.onRequestRejected(t)})).then(onRequestComplete,onRequestComplete),this.autoUpdate&&this.scheduleNextUpdate()},HttpPollingDatafileManager.prototype.resolveReadyPromise=function(){this.readyPromiseResolver(),this.isReadyPromiseSettled=!0},HttpPollingDatafileManager.prototype.rejectReadyPromise=function(e){this.readyPromiseRejecter(e),this.isReadyPromiseSettled=!0},HttpPollingDatafileManager.prototype.scheduleNextUpdate=function(){var e=this,t=this.backoffController.getDelay(),i=Math.max(t,this.updateInterval);d.debug("Scheduling sync in %s ms",i),this.currentTimeout=setTimeout((function(){e.currentRequest?e.syncOnCurrentRequestComplete=!0:e.syncDatafile()}),i)},HttpPollingDatafileManager.prototype.getNextDatafileFromResponse=function(e){return d.debug("Response status code: %s",e.statusCode),void 0===e.statusCode||304===e.statusCode?null:isSuccessStatusCode(e.statusCode)?this.tryParsingBodyAsJSON(e.body):null},HttpPollingDatafileManager.prototype.tryParsingBodyAsJSON=function(e){var t;try{t=JSON.parse(e)}catch(e){return d.error("Error parsing response body: %s",e.message,e),null}var i=null;return"object"==typeof t&&null!==t?i=t:d.error("Error parsing response body: was not an object"),i},HttpPollingDatafileManager.prototype.trySavingLastModified=function(e){var t=e["last-modified"]||e["Last-Modified"];void 0!==t&&(this.lastResponseLastModified=t,d.debug("Saved last modified header value from response: %s",this.lastResponseLastModified))},HttpPollingDatafileManager}();t.default=c},"../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/index.browser.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/browserDatafileManager.js");t.HttpPollingDatafileManager=r.default;var s=i("../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/staticDatafileManager.js");t.StaticDatafileManager=s.default},"../../.yarn/cache/@optimizely-js-sdk-datafile-manager-npm-0.4.0-083b3d5360-7a338fd847.zip/node_modules/@optimizely/js-sdk-datafile-manager/lib/staticDatafileManager.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var doNothing=function(){},r=function(){function StaticDatafileManager(e){this.datafile=e,this.readyPromise=Promise.resolve()}return StaticDatafileManager.prototype.get=function(){return this.datafile},StaticDatafileManager.prototype.onReady=function(){return this.readyPromise},StaticDatafileManager.prototype.start=function(){},StaticDatafileManager.prototype.stop=function(){return Promise.resolve()},StaticDatafileManager.prototype.on=function(e,t){return doNothing},StaticDatafileManager}();t.default=r},"../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/eventProcessor.js":function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i("../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/events.js"),n=i("../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/eventQueue.js"),o=i("../../.yarn/cache/@optimizely-js-sdk-logging-npm-0.1.0-43f6c5e030-b1d2de26cf.zip/node_modules/@optimizely/js-sdk-logging/lib/index.js"),a=i("../../.yarn/cache/@optimizely-js-sdk-utils-npm-0.2.0-6e592e4113-c935bbfbc7.zip/node_modules/@optimizely/js-sdk-utils/lib/index.js"),l=r(i("../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/requestTracker.js")),u=o.getLogger("EventProcessor"),d=function(){function AbstractEventProcessor(e){var t=e.dispatcher,i=e.flushInterval,r=void 0===i?3e4:i,o=e.maxQueueSize,a=void 0===o?3e3:o,d=e.notificationCenter,c=this;this.dispatcher=t,r<=0&&(u.warn("Invalid flushInterval "+r+", defaulting to 30000"),r=3e4),(a=Math.floor(a))<1&&(u.warn("Invalid maxQueueSize "+a+", defaulting to 10"),a=10),a=Math.max(1,a),this.queue=a>1?new n.DefaultEventQueue({flushInterval:r,maxQueueSize:a,sink:function(e){return c.drainQueue(e)},batchComparator:s.areEventContextsEqual}):new n.SingleEventQueue({sink:function(e){return c.drainQueue(e)}}),this.notificationCenter=d,this.requestTracker=new l.default}return AbstractEventProcessor.prototype.drainQueue=function(e){var t=this,i=new Promise((function(i){if(u.debug("draining queue with %s events",e.length),0!==e.length){var r=t.formatEvents(e);t.dispatcher.dispatchEvent(r,(function(){i()})),t.notificationCenter&&t.notificationCenter.sendNotifications(a.NOTIFICATION_TYPES.LOG_EVENT,r)}else i()}));return this.requestTracker.trackRequest(i),i},AbstractEventProcessor.prototype.process=function(e){this.queue.enqueue(e)},AbstractEventProcessor.prototype.stop=function(){try{return this.queue.stop(),this.requestTracker.onRequestsComplete()}catch(e){u.error('Error stopping EventProcessor: "%s"',e.message,e)}return Promise.resolve()},AbstractEventProcessor.prototype.start=function(){this.queue.start()},AbstractEventProcessor}();t.AbstractEventProcessor=d},"../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/eventQueue.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("../../.yarn/cache/@optimizely-js-sdk-logging-npm-0.1.0-43f6c5e030-b1d2de26cf.zip/node_modules/@optimizely/js-sdk-logging/lib/index.js").getLogger("EventProcessor"),s=function(){function Timer(e){var t=e.timeout,i=e.callback;this.timeout=Math.max(t,0),this.callback=i}return Timer.prototype.start=function(){this.timeoutId=setTimeout(this.callback,this.timeout)},Timer.prototype.refresh=function(){this.stop(),this.start()},Timer.prototype.stop=function(){this.timeoutId&&clearTimeout(this.timeoutId)},Timer}(),n=function(){function SingleEventQueue(e){var t=e.sink;this.sink=t}return SingleEventQueue.prototype.start=function(){},SingleEventQueue.prototype.stop=function(){return Promise.resolve()},SingleEventQueue.prototype.enqueue=function(e){this.sink([e])},SingleEventQueue}();t.SingleEventQueue=n;var o=function(){function DefaultEventQueue(e){var t=e.flushInterval,i=e.maxQueueSize,r=e.sink,n=e.batchComparator;this.buffer=[],this.maxQueueSize=Math.max(i,1),this.sink=r,this.batchComparator=n,this.timer=new s({callback:this.flush.bind(this),timeout:t}),this.started=!1}return DefaultEventQueue.prototype.start=function(){this.started=!0},DefaultEventQueue.prototype.stop=function(){this.started=!1;var e=this.sink(this.buffer);return this.buffer=[],this.timer.stop(),e},DefaultEventQueue.prototype.enqueue=function(e){if(this.started){var t=this.buffer[0];t&&!this.batchComparator(t,e)&&this.flush(),0===this.buffer.length&&this.timer.refresh(),this.buffer.push(e),this.buffer.length>=this.maxQueueSize&&this.flush()}else r.warn("Queue is stopped, not accepting event")},DefaultEventQueue.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},DefaultEventQueue}();t.DefaultEventQueue=o},"../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/events.js":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areEventContextsEqual=function areEventContextsEqual(e,t){var i=e.context,r=t.context;return i.accountId===r.accountId&&i.projectId===r.projectId&&i.clientName===r.clientName&&i.clientVersion===r.clientVersion&&i.revision===r.revision&&i.anonymizeIP===r.anonymizeIP&&i.botFiltering===r.botFiltering}},"../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/index.js":function(e,t,i){"use strict";function __export(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),__export(i("../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/events.js")),__export(i("../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/eventProcessor.js")),__export(i("../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/pendingEventsDispatcher.js")),__export(i("../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/v1/buildEventV1.js")),__export(i("../../.yarn/cache/@optimizely-js-sdk-event-processor-npm-0.4.0-a83376e778-6838febe08.zip/node_modules/@optimizely/js-sdk-event-processor/lib/v1/v1EventProcessor.js"))}}]);
//# sourceMappingURL=npm.optimizely~f7ad4bf3.chunk.922223.js.map