(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/audience_evaluator/index.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/condition_tree_evaluator/index.js"),n=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/custom_attribute_condition_evaluator/index.js"),o=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/enums/index.js"),a=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/fns/index.js"),l=t("../../.yarn/cache/@optimizely-js-sdk-utils-npm-0.2.0-6e592e4113-c935bbfbc7.zip/node_modules/@optimizely/js-sdk-utils/lib/index.js").sprintf,s=t("../../.yarn/cache/@optimizely-js-sdk-logging-npm-0.1.0-43f6c5e030-b1d2de26cf.zip/node_modules/@optimizely/js-sdk-logging/lib/index.js").getLogger(),u=o.ERROR_MESSAGES,p=o.LOG_LEVEL,E=o.LOG_MESSAGES,c="AUDIENCE_EVALUATOR";function AudienceEvaluator(e){this.typeToEvaluatorMap=a.assignIn({},e,{custom_attribute:n})}AudienceEvaluator.prototype.evaluate=function(e,i,t){if(!e||0===e.length)return!0;t||(t={});var n=function(e){var n=i[e];if(n){s.log(p.DEBUG,l(E.EVALUATING_AUDIENCE,c,e,JSON.stringify(n.conditions)));var o=r.evaluate(n.conditions,this.evaluateConditionWithUserAttributes.bind(this,t)),a=null===o?"UNKNOWN":o.toString().toUpperCase();return s.log(p.INFO,l(E.AUDIENCE_EVALUATION_RESULT,c,e,a)),o}return null}.bind(this);return r.evaluate(e,n)||!1},AudienceEvaluator.prototype.evaluateConditionWithUserAttributes=function(e,i){var t=this.typeToEvaluatorMap[i.type];if(!t)return s.log(p.WARNING,l(E.UNKNOWN_CONDITION_TYPE,c,JSON.stringify(i))),null;try{return t.evaluate(i,e,s)}catch(e){s.log(p.ERROR,l(u.CONDITION_EVALUATOR_ERROR,c,i.type,e.message))}return null},e.exports=AudienceEvaluator},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/bucketer/index.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/enums/index.js"),n=t("../../.yarn/cache/murmurhash-npm-0.0.2-f0ae55780b-e06d1e7cfd.zip/node_modules/murmurhash/murmurhash.js"),o=t("../../.yarn/cache/@optimizely-js-sdk-utils-npm-0.2.0-6e592e4113-c935bbfbc7.zip/node_modules/@optimizely/js-sdk-utils/lib/index.js").sprintf,a=r.ERROR_MESSAGES,l=r.LOG_LEVEL,s=r.LOG_MESSAGES,u=Math.pow(2,32);e.exports={bucket:function(i){var t=i.experimentKeyMap[i.experimentKey].groupId;if(t){var r=i.groupIdMap[t];if(!r)throw new Error(o(a.INVALID_GROUP_ID,"BUCKETER",t));if("random"===r.policy){var n=e.exports.bucketUserIntoExperiment(r,i.bucketingId,i.userId,i.logger);if(null===n){var u=o(s.USER_NOT_IN_ANY_EXPERIMENT,"BUCKETER",i.userId,t);return i.logger.log(l.INFO,u),null}if(n!==i.experimentId){var p=o(s.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",i.userId,i.experimentKey,t);return i.logger.log(l.INFO,p),null}var E=o(s.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",i.userId,i.experimentKey,t);i.logger.log(l.INFO,E)}}var c=o("%s%s",i.bucketingId,i.experimentId),d=e.exports._generateBucketValue(c),_=o(s.USER_ASSIGNED_TO_VARIATION_BUCKET,"BUCKETER",d,i.userId);i.logger.log(l.DEBUG,_);var g=e.exports._findBucket(d,i.trafficAllocationConfig);if(g){if(!i.variationIdMap.hasOwnProperty(g)){var m=o(s.INVALID_VARIATION_ID,"BUCKETER");return i.logger.log(l.WARNING,m),null}var y=i.variationIdMap[g].key,I=o(s.USER_HAS_VARIATION,"BUCKETER",i.userId,y,i.experimentKey);i.logger.log(l.INFO,I)}else{var v=o(s.USER_HAS_NO_VARIATION,"BUCKETER",i.userId,i.experimentKey);i.logger.log(l.DEBUG,v)}return g},bucketUserIntoExperiment:function(i,t,r,n){var a=o("%s%s",t,i.id),u=e.exports._generateBucketValue(a);n.log(l.DEBUG,o(s.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",u,r));var p=i.trafficAllocation;return e.exports._findBucket(u,p)},_findBucket:function(e,i){for(var t=0;t<i.length;t++)if(e<i[t].endOfRange)return i[t].entityId;return null},_generateBucketValue:function(e){try{var i=n.v3(e,1);return parseInt(1e4*(i/u),10)}catch(i){throw new Error(o(a.INVALID_BUCKETING_ID,"BUCKETER",e,i.message))}}}},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/condition_tree_evaluator/index.js":function(e,i){var t=["and","or","not"];function evaluate(e,i){if(Array.isArray(e)){var r=e[0],n=e.slice(1);switch(-1===t.indexOf(r)&&(r="or",n=e),r){case"and":return function andEvaluator(e,i){for(var t=!1,r=0;r<e.length;r++){var n=evaluate(e[r],i);if(!1===n)return!1;null===n&&(t=!0)}return!t||null}(n,i);case"not":return function notEvaluator(e,i){if(e.length>0){var t=evaluate(e[0],i);return null===t?null:!t}return null}(n,i);default:return function orEvaluator(e,i){for(var t=!1,r=0;r<e.length;r++){var n=evaluate(e[r],i);if(!0===n)return!0;null===n&&(t=!0)}return!!t&&null}(n,i)}}return i(e)}e.exports={evaluate:evaluate}},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/custom_attribute_condition_evaluator/index.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/fns/index.js"),n=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/enums/index.js"),o=t("../../.yarn/cache/@optimizely-js-sdk-utils-npm-0.2.0-6e592e4113-c935bbfbc7.zip/node_modules/@optimizely/js-sdk-utils/lib/index.js").sprintf,a=n.LOG_LEVEL,l=n.LOG_MESSAGES,s="CUSTOM_ATTRIBUTE_CONDITION_EVALUATOR",u=["exact","exists","gt","lt","substring"],p={};function isValueTypeValidForExactConditions(e){return"string"==typeof e||"boolean"==typeof e||r.isNumber(e)}function exactEvaluator(e,i,t){var n=e.value,u=typeof n,p=e.name,E=i[p],c=typeof E;return!isValueTypeValidForExactConditions(n)||r.isNumber(n)&&!r.isFinite(n)?(t.log(a.WARNING,o(l.UNEXPECTED_CONDITION_VALUE,s,JSON.stringify(e))),null):null===E?(t.log(a.DEBUG,o(l.UNEXPECTED_TYPE_NULL,s,JSON.stringify(e),p)),null):isValueTypeValidForExactConditions(E)&&u===c?r.isNumber(E)&&!r.isFinite(E)?(t.log(a.WARNING,o(l.OUT_OF_BOUNDS,s,JSON.stringify(e),p)),null):n===E:(t.log(a.WARNING,o(l.UNEXPECTED_TYPE,s,JSON.stringify(e),c,p)),null)}p.exact=exactEvaluator,p.exists=function existsEvaluator(e,i){var t=i[e.name];return null!=t},p.gt=function greaterThanEvaluator(e,i,t){var n=e.name,u=i[n],p=typeof u,E=e.value;if(!r.isFinite(E))return t.log(a.WARNING,o(l.UNEXPECTED_CONDITION_VALUE,s,JSON.stringify(e))),null;if(null===u)return t.log(a.DEBUG,o(l.UNEXPECTED_TYPE_NULL,s,JSON.stringify(e),n)),null;if(!r.isNumber(u))return t.log(a.WARNING,o(l.UNEXPECTED_TYPE,s,JSON.stringify(e),p,n)),null;if(!r.isFinite(u))return t.log(a.WARNING,o(l.OUT_OF_BOUNDS,s,JSON.stringify(e),n)),null;return u>E},p.lt=function lessThanEvaluator(e,i,t){var n=e.name,u=i[e.name],p=typeof u,E=e.value;if(!r.isFinite(E))return t.log(a.WARNING,o(l.UNEXPECTED_CONDITION_VALUE,s,JSON.stringify(e))),null;if(null===u)return t.log(a.DEBUG,o(l.UNEXPECTED_TYPE_NULL,s,JSON.stringify(e),n)),null;if(!r.isNumber(u))return t.log(a.WARNING,o(l.UNEXPECTED_TYPE,s,JSON.stringify(e),p,n)),null;if(!r.isFinite(u))return t.log(a.WARNING,o(l.OUT_OF_BOUNDS,s,JSON.stringify(e),n)),null;return u<E},p.substring=function substringEvaluator(e,i,t){var r=e.name,n=i[e.name],u=typeof n,p=e.value;if("string"!=typeof p)return t.log(a.WARNING,o(l.UNEXPECTED_CONDITION_VALUE,s,JSON.stringify(e))),null;if(null===n)return t.log(a.DEBUG,o(l.UNEXPECTED_TYPE_NULL,s,JSON.stringify(e),r)),null;if("string"!=typeof n)return t.log(a.WARNING,o(l.UNEXPECTED_TYPE,s,JSON.stringify(e),u,r)),null;return-1!==n.indexOf(p)},e.exports={evaluate:function evaluate(e,i,t){var r=e.match;if(void 0!==r&&-1===u.indexOf(r))return t.log(a.WARNING,o(l.UNKNOWN_MATCH_TYPE,s,JSON.stringify(e))),null;var n=e.name;return i.hasOwnProperty(n)||"exists"==r?(p[r]||exactEvaluator)(e,i,t):(t.log(a.DEBUG,o(l.MISSING_ATTRIBUTE_VALUE,s,JSON.stringify(e),n)),null)}}},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/decision_service/index.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/audience_evaluator/index.js"),n=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/bucketer/index.js"),o=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/enums/index.js"),a=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/fns/index.js"),l=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/project_config/index.js"),s=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/string_value_validator/index.js"),u=t("../../.yarn/cache/@optimizely-js-sdk-utils-npm-0.2.0-6e592e4113-c935bbfbc7.zip/node_modules/@optimizely/js-sdk-utils/lib/index.js").sprintf,p="DECISION_SERVICE",E=o.ERROR_MESSAGES,c=o.LOG_LEVEL,d=o.LOG_MESSAGES,_=o.DECISION_SOURCES;function DecisionService(e){this.audienceEvaluator=new r(e.UNSTABLE_conditionEvaluators),this.forcedVariationMap={},this.logger=e.logger,this.userProfileService=e.userProfileService||null}DecisionService.prototype.getVariation=function(e,i,t,r){var o=this._getBucketingId(t,r);if(!this.__checkIfExperimentIsActive(e,i))return null;var a=e.experimentKeyMap[i],l=this.getForcedVariation(e,i,t);if(l)return l;var s=this.__getWhitelistedVariation(a,t);if(s)return s.key;var E=this.__resolveExperimentBucketMap(t,r);if(s=this.__getStoredVariation(e,a,t,E))return this.logger.log(c.INFO,u(d.RETURNING_STORED_VARIATION,p,s.key,i,t)),s.key;if(!this.__checkIfUserIsInAudience(e,i,t,r))return null;var _=this.__buildBucketerParams(e,i,o,t),g=n.bucket(_);return(s=e.variationIdMap[g])?(this.__saveUserProfile(a,s,t,E),s.key):null},DecisionService.prototype.__resolveExperimentBucketMap=function(e,i){i=i||{};var t=this.__getUserProfile(e)||{},r=i[o.CONTROL_ATTRIBUTES.STICKY_BUCKETING_KEY];return a.assignIn({},t.experiment_bucket_map,r)},DecisionService.prototype.__checkIfExperimentIsActive=function(e,i){if(!l.isActive(e,i)){var t=u(d.EXPERIMENT_NOT_RUNNING,p,i);return this.logger.log(c.INFO,t),!1}return!0},DecisionService.prototype.__getWhitelistedVariation=function(e,i){if(!a.isEmpty(e.forcedVariations)&&e.forcedVariations.hasOwnProperty(i)){var t=e.forcedVariations[i];if(e.variationKeyMap.hasOwnProperty(t)){var r=u(d.USER_FORCED_IN_VARIATION,p,i,t);return this.logger.log(c.INFO,r),e.variationKeyMap[t]}var n=u(d.FORCED_BUCKETING_FAILED,p,t,i);return this.logger.log(c.ERROR,n),null}return null},DecisionService.prototype.__checkIfUserIsInAudience=function(e,i,t,r){var n=l.getExperimentAudienceConditions(e,i),o=l.getAudiencesById(e);this.logger.log(c.DEBUG,u(d.EVALUATING_AUDIENCES_COMBINED,p,i,JSON.stringify(n)));var a=this.audienceEvaluator.evaluate(n,o,r);if(this.logger.log(c.INFO,u(d.AUDIENCE_EVALUATION_RESULT_COMBINED,p,i,a.toString().toUpperCase())),!a){var s=u(d.USER_NOT_IN_EXPERIMENT,p,t,i);return this.logger.log(c.INFO,s),!1}return!0},DecisionService.prototype.__buildBucketerParams=function(e,i,t,r){var n={};return n.experimentKey=i,n.experimentId=l.getExperimentId(e,i),n.userId=r,n.trafficAllocationConfig=l.getTrafficAllocation(e,i),n.experimentKeyMap=e.experimentKeyMap,n.groupIdMap=e.groupIdMap,n.variationIdMap=e.variationIdMap,n.logger=this.logger,n.bucketingId=t,n},DecisionService.prototype.__getStoredVariation=function(e,i,t,r){if(r.hasOwnProperty(i.id)){var n=r[i.id],o=n.variation_id;if(e.variationIdMap.hasOwnProperty(o))return e.variationIdMap[n.variation_id];this.logger.log(c.INFO,u(d.SAVED_VARIATION_NOT_FOUND,p,t,o,i.key))}return null},DecisionService.prototype.__getUserProfile=function(e){var i={user_id:e,experiment_bucket_map:{}};if(!this.userProfileService)return i;try{return this.userProfileService.lookup(e)}catch(i){this.logger.log(c.ERROR,u(E.USER_PROFILE_LOOKUP_ERROR,p,e,i.message))}},DecisionService.prototype.__saveUserProfile=function(e,i,t,r){if(this.userProfileService)try{var n=a.cloneDeep(r);n[e.id]={variation_id:i.id},this.userProfileService.save({user_id:t,experiment_bucket_map:n}),this.logger.log(c.INFO,u(d.SAVED_VARIATION,p,i.key,e.key,t))}catch(e){this.logger.log(c.ERROR,u(E.USER_PROFILE_SAVE_ERROR,p,t,e.message))}},DecisionService.prototype.getVariationForFeature=function(e,i,t,r){var n=this._getVariationForFeatureExperiment(e,i,t,r);if(null!==n.variation)return this.logger.log(c.DEBUG,u(d.USER_IN_FEATURE_EXPERIMENT,p,t,n.variation.key,n.experiment.key,i.key)),n;this.logger.log(c.DEBUG,u(d.USER_NOT_IN_FEATURE_EXPERIMENT,p,t,i.key));var o=this._getVariationForRollout(e,i,t,r);return null!==o.variation?(this.logger.log(c.DEBUG,u(d.USER_IN_ROLLOUT,p,t,i.key)),o):(this.logger.log(c.DEBUG,u(d.USER_NOT_IN_ROLLOUT,p,t,i.key)),o)},DecisionService.prototype._getVariationForFeatureExperiment=function(e,i,t,r){var n=null,o=null;if(i.hasOwnProperty("groupId")){var a=e.groupIdMap[i.groupId];a&&(n=this._getExperimentInGroup(e,a,t))&&-1!==i.experimentIds.indexOf(n.id)&&(o=this.getVariation(e,n.key,t,r))}else i.experimentIds.length>0?(n=l.getExperimentFromId(e,i.experimentIds[0],this.logger))&&(o=this.getVariation(e,n.key,t,r)):this.logger.log(c.DEBUG,u(d.FEATURE_HAS_NO_EXPERIMENTS,p,i.key));var s=null;return null!==o&&null!==n&&(s=n.variationKeyMap[o]),{experiment:n,variation:s,decisionSource:_.FEATURE_TEST}},DecisionService.prototype._getExperimentInGroup=function(e,i,t){var r=n.bucketUserIntoExperiment(i,t,t,this.logger);if(r){this.logger.log(c.INFO,u(d.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,p,t,r,i.id));var o=l.getExperimentFromId(e,r,this.logger);if(o)return o}return this.logger.log(c.INFO,u(d.USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP,p,t,i.id)),null},DecisionService.prototype._getVariationForRollout=function(e,i,t,r){if(!i.rolloutId)return this.logger.log(c.DEBUG,u(d.NO_ROLLOUT_EXISTS,p,i.key)),{experiment:null,variation:null,decisionSource:_.ROLLOUT};var o=e.rolloutIdMap[i.rolloutId];if(!o)return this.logger.log(c.ERROR,u(E.INVALID_ROLLOUT_ID,p,i.rolloutId,i.key)),{experiment:null,variation:null,decisionSource:_.ROLLOUT};if(0===o.experiments.length)return this.logger.log(c.ERROR,u(d.ROLLOUT_HAS_NO_EXPERIMENTS,p,i.rolloutId)),{experiment:null,variation:null,decisionSource:_.ROLLOUT};var a,l,s,g,m,y=this._getBucketingId(t,r),I=o.experiments.length-1;for(a=0;a<I;a++){if(l=e.experimentKeyMap[o.experiments[a].key],this.__checkIfUserIsInAudience(e,l.key,t,r)){if(this.logger.log(c.DEBUG,u(d.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,p,t,a+1)),s=this.__buildBucketerParams(e,l.key,y,t),g=n.bucket(s),m=e.variationIdMap[g])return this.logger.log(c.DEBUG,u(d.USER_BUCKETED_INTO_TARGETING_RULE,p,t,a+1)),{experiment:l,variation:m,decisionSource:_.ROLLOUT};this.logger.log(c.DEBUG,u(d.USER_NOT_BUCKETED_INTO_TARGETING_RULE,p,t,a+1));break}this.logger.log(c.DEBUG,u(d.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,p,t,a+1))}var v=e.experimentKeyMap[o.experiments[I].key];if(this.__checkIfUserIsInAudience(e,v.key,t,r)){if(s=this.__buildBucketerParams(e,v.key,y,t),g=n.bucket(s),m=e.variationIdMap[g])return this.logger.log(c.DEBUG,u(d.USER_BUCKETED_INTO_EVERYONE_TARGETING_RULE,p,t)),{experiment:v,variation:m,decisionSource:_.ROLLOUT};this.logger.log(c.DEBUG,u(d.USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE,p,t))}return{experiment:null,variation:null,decisionSource:_.ROLLOUT}},DecisionService.prototype._getBucketingId=function(e,i){var t=e;return null!=i&&"object"==typeof i&&i.hasOwnProperty(o.CONTROL_ATTRIBUTES.BUCKETING_ID)&&("string"==typeof i[o.CONTROL_ATTRIBUTES.BUCKETING_ID]?(t=i[o.CONTROL_ATTRIBUTES.BUCKETING_ID],this.logger.log(c.DEBUG,u(d.VALID_BUCKETING_ID,p,t))):this.logger.log(c.WARNING,u(d.BUCKETING_ID_NOT_STRING,p))),t},DecisionService.prototype.removeForcedVariation=function(e,i,t){if(!e)throw new Error(u(E.INVALID_USER_ID,p));if(!this.forcedVariationMap.hasOwnProperty(e))throw new Error(u(E.USER_NOT_IN_FORCED_VARIATION,p,e));delete this.forcedVariationMap[e][i],this.logger.log(c.DEBUG,u(d.VARIATION_REMOVED_FOR_USER,p,t,e))},DecisionService.prototype.__setInForcedVariationMap=function(e,i,t){this.forcedVariationMap.hasOwnProperty(e)||(this.forcedVariationMap[e]={}),this.forcedVariationMap[e][i]=t,this.logger.log(c.DEBUG,u(d.USER_MAPPED_TO_FORCED_VARIATION,p,t,i,e))},DecisionService.prototype.getForcedVariation=function(e,i,t){var r,n=this.forcedVariationMap[t];if(!n)return this.logger.log(c.DEBUG,u(d.USER_HAS_NO_FORCED_VARIATION,p,t)),null;try{var o=l.getExperimentFromKey(e,i);if(!o.hasOwnProperty("id"))return this.logger.log(c.ERROR,u(E.IMPROPERLY_FORMATTED_EXPERIMENT,p,i)),null;r=o.id}catch(e){return this.logger.log(c.ERROR,e.message),null}var a=n[r];if(!a)return this.logger.log(c.DEBUG,u(d.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,p,i,t)),null;var s=l.getVariationKeyFromId(e,a);return s?this.logger.log(c.DEBUG,u(d.USER_HAS_FORCED_VARIATION,p,s,i,t)):this.logger.log(c.DEBUG,u(d.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,p,i,t)),s},DecisionService.prototype.setForcedVariation=function(e,i,t,r){if(null!=r&&!s.validate(r))return this.logger.log(c.ERROR,u(E.INVALID_VARIATION_KEY,p)),!1;var n;try{var o=l.getExperimentFromKey(e,i);if(!o.hasOwnProperty("id"))return this.logger.log(c.ERROR,u(E.IMPROPERLY_FORMATTED_EXPERIMENT,p,i)),!1;n=o.id}catch(e){return this.logger.log(c.ERROR,e.message),!1}if(null==r)try{return this.removeForcedVariation(t,n,i,this.logger),!0}catch(e){return this.logger.log(c.ERROR,e.message),!1}var a=l.getVariationIdFromExperimentAndVariationKey(e,i,r);if(!a)return this.logger.log(c.ERROR,u(E.NO_VARIATION_FOR_EXPERIMENT_KEY,p,r,i)),!1;try{return this.__setInForcedVariationMap(t,n,a),!0}catch(e){return this.logger.log(c.ERROR,e.message),!1}},e.exports={createDecisionService:function(e){return new DecisionService(e)}}},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/event_builder/event_helpers.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-js-sdk-logging-npm-0.1.0-43f6c5e030-b1d2de26cf.zip/node_modules/@optimizely/js-sdk-logging/lib/index.js"),n=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/attributes_validator/index.js"),o=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/fns/index.js"),a=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/event_tag_utils/index.js"),l=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/project_config/index.js"),s=r.getLogger("EVENT_BUILDER");function buildVisitorAttributes(e,i){var t=[];return o.forOwn(i,(function(r,o){if(n.isAttributeValid(o,r)){var a=l.getAttributeId(e,o,s);a&&t.push({entityId:a,key:o,value:i[o]})}})),t}i.buildImpressionEvent=function buildImpressionEvent(e){var i=e.configObj,t=e.experimentKey,r=e.variationKey,n=e.userId,a=e.userAttributes,s=e.clientEngine,u=e.clientVersion,p=l.getVariationIdFromExperimentAndVariationKey(i,t,r),E=l.getExperimentId(i,t),c=l.getLayerId(i,E);return{type:"impression",timestamp:o.currentTimestamp(),uuid:o.uuid(),user:{id:n,attributes:buildVisitorAttributes(i,a)},context:{accountId:i.accountId,projectId:i.projectId,revision:i.revision,clientName:s,clientVersion:u,anonymizeIP:i.anonymizeIP||!1,botFiltering:i.botFiltering},layer:{id:c},experiment:{id:E,key:t},variation:{id:p,key:r}}},i.buildConversionEvent=function buildConversionEvent(e){var i=e.configObj,t=e.userId,r=e.userAttributes,n=e.clientEngine,u=e.clientVersion,p=e.eventKey,E=e.eventTags,c=l.getEventId(i,p);return{type:"conversion",timestamp:o.currentTimestamp(),uuid:o.uuid(),user:{id:t,attributes:buildVisitorAttributes(i,r)},context:{accountId:i.accountId,projectId:i.projectId,revision:i.revision,clientName:n,clientVersion:u,anonymizeIP:i.anonymizeIP||!1,botFiltering:i.botFiltering},event:{id:c,key:p},revenue:a.getRevenueValue(E,s),value:a.getEventValue(E,s),tags:E}}},"../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/event_builder/index.js":function(e,i,t){var r=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/enums/index.js"),n=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/fns/index.js"),o=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/event_tag_utils/index.js"),a=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/core/project_config/index.js"),l=t("../../.yarn/cache/@optimizely-optimizely-sdk-npm-3.5.0-03a2197329-2595552a44.zip/node_modules/@optimizely/optimizely-sdk/lib/utils/attributes_validator/index.js"),s="https://logx.optimizely.com/v1/events";function getCommonEventParams(e){var i=e.attributes,t=e.configObj,o=t.anonymizeIP,s=t.botFiltering;null==o&&(o=!1);var u={snapshots:[],visitor_id:e.userId,attributes:[]},p={account_id:t.accountId,project_id:t.projectId,visitors:[u],revision:t.revision,client_name:e.clientEngine,client_version:e.clientVersion,anonymize_ip:o,enrich_decisions:!0};return n.forOwn(i,(function(t,r){if(l.isAttributeValid(r,t)){var n=a.getAttributeId(e.configObj,r,e.logger);n&&p.visitors[0].attributes.push({entity_id:n,key:r,type:"custom",value:i[r]})}})),"boolean"==typeof s&&p.visitors[0].attributes.push({entity_id:r.CONTROL_ATTRIBUTES.BOT_FILTERING,key:r.CONTROL_ATTRIBUTES.BOT_FILTERING,type:"custom",value:s}),p}e.exports={getImpressionEvent:function(e){var i={httpVerb:"POST"},t=getCommonEventParams(e);i.url=s;var r=function getImpressionEventParams(e,i,t){return{decisions:[{campaign_id:a.getLayerId(e,i),experiment_id:i,variation_id:t}],events:[{entity_id:a.getLayerId(e,i),timestamp:n.currentTimestamp(),key:"campaign_activated",uuid:n.uuid()}]}}(e.configObj,e.experimentId,e.variationId);return t.visitors[0].snapshots.push(r),i.params=t,i},getConversionEvent:function(e){var i={httpVerb:"POST"},t=getCommonEventParams(e);i.url=s;var l=function getVisitorSnapshot(e,i,t,l){var s={events:[]},u={entity_id:a.getEventId(e,i),timestamp:n.currentTimestamp(),uuid:n.uuid(),key:i};if(t){var p=o.getRevenueValue(t,l);null!==p&&(u[r.RESERVED_EVENT_KEYWORDS.REVENUE]=p);var E=o.getEventValue(t,l);null!==E&&(u[r.RESERVED_EVENT_KEYWORDS.VALUE]=E),u.tags=t}return s.events.push(u),s}(e.configObj,e.eventKey,e.eventTags,e.logger);return t.visitors[0].snapshots=[l],i.params=t,i}}}}]);
//# sourceMappingURL=npm.optimizely~31a6f957.chunk.f20ec4.js.map